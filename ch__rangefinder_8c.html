<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Chirp SonicLib: invn/soniclib/ch_rangefinder.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Chirp SonicLib
   &#160;<span id="projectnumber">4.7.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e2bc8ccdb587e3c3e16dcbd6fd126654.html">invn</a></li><li class="navelem"><a class="el" href="dir_0ccdbf2c279b53b38c827faf1754ce51.html">soniclib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ch_rangefinder.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Chirp SonicLib API range finding function implementations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="ch__log_8h_source.html">invn/soniclib/ch_log.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="ch__common_8h_source.html">invn/soniclib/details/ch_common.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="icu__gpt_8h_source.html">invn/soniclib/sensor_fw/icu_gpt/icu_gpt.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="ch__rangefinder__types_8h_source.html">invn/soniclib/ch_rangefinder_types.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="ch__rangefinder_8h_source.html">invn/soniclib/ch_rangefinder.h</a>&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac267847903e9c913f734c9ce77fbb26e"><td class="memItemLeft" align="right" valign="top"><a id="ac267847903e9c913f734c9ce77fbb26e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CH_LOG_MODULE_NAME</b>&#160;&#160;&#160;&quot;CH_RANGEFINDER&quot;</td></tr>
<tr class="separator:ac267847903e9c913f734c9ce77fbb26e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0fef1804e3c80f73d9b4f9bf7b9ad685"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a0fef1804e3c80f73d9b4f9bf7b9ad685">ch_get_num_targets</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr)</td></tr>
<tr class="memdesc:a0fef1804e3c80f73d9b4f9bf7b9ad685"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of targets detected in last measurement.  <a href="ch__rangefinder_8c.html#a0fef1804e3c80f73d9b4f9bf7b9ad685">More...</a><br /></td></tr>
<tr class="separator:a0fef1804e3c80f73d9b4f9bf7b9ad685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1845a2ae19a7be6b18f144eda2f5066"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#af1845a2ae19a7be6b18f144eda2f5066">ch_get_num_thresholds</a> (const <a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr)</td></tr>
<tr class="memdesc:af1845a2ae19a7be6b18f144eda2f5066"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of detection thresholds.  <a href="ch__rangefinder_8c.html#af1845a2ae19a7be6b18f144eda2f5066">More...</a><br /></td></tr>
<tr class="separator:af1845a2ae19a7be6b18f144eda2f5066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab71d5ac02276e0d9b77549eb29195d6c"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#ab71d5ac02276e0d9b77549eb29195d6c">ch_get_rx_holdoff</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr)</td></tr>
<tr class="memdesc:ab71d5ac02276e0d9b77549eb29195d6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the receive holdoff sample count.  <a href="ch__rangefinder_8c.html#ab71d5ac02276e0d9b77549eb29195d6c">More...</a><br /></td></tr>
<tr class="separator:ab71d5ac02276e0d9b77549eb29195d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48883557bd21adef2ea2621e4de824af"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a48883557bd21adef2ea2621e4de824af">ch_get_static_range</a> (const <a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr)</td></tr>
<tr class="memdesc:a48883557bd21adef2ea2621e4de824af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get static target rejection range setting.  <a href="ch__rangefinder_8c.html#a48883557bd21adef2ea2621e4de824af">More...</a><br /></td></tr>
<tr class="separator:a48883557bd21adef2ea2621e4de824af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ecb1677cd9f1a8d767c2715a133670e"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a2ecb1677cd9f1a8d767c2715a133670e">ch_get_target_amplitude</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, uint8_t target_num)</td></tr>
<tr class="memdesc:a2ecb1677cd9f1a8d767c2715a133670e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the amplitude for a specific target detected in last measurement.  <a href="ch__rangefinder_8c.html#a2ecb1677cd9f1a8d767c2715a133670e">More...</a><br /></td></tr>
<tr class="separator:a2ecb1677cd9f1a8d767c2715a133670e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24683d6023095d66f876895e2cd01cd2"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a24683d6023095d66f876895e2cd01cd2">ch_get_target_range</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, uint8_t target_num, <a class="el" href="soniclib_8h.html#a1b137d77afad79d536e322eacdfebd0c">ch_range_t</a> range_type)</td></tr>
<tr class="memdesc:a24683d6023095d66f876895e2cd01cd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the range to a specific target detected in last measurement.  <a href="ch__rangefinder_8c.html#a24683d6023095d66f876895e2cd01cd2">More...</a><br /></td></tr>
<tr class="separator:a24683d6023095d66f876895e2cd01cd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b1f2f18f9ff1bd6e61902790e541d86"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a8b1f2f18f9ff1bd6e61902790e541d86">ch_get_target_tof_us</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, uint8_t target_num)</td></tr>
<tr class="memdesc:a8b1f2f18f9ff1bd6e61902790e541d86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the measured time-of-flight for a specific target in microseconds.  <a href="ch__rangefinder_8c.html#a8b1f2f18f9ff1bd6e61902790e541d86">More...</a><br /></td></tr>
<tr class="separator:a8b1f2f18f9ff1bd6e61902790e541d86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05448e0cd2c7bd018c6ca10d29aa5673"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a05448e0cd2c7bd018c6ca10d29aa5673">ch_get_threshold</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, uint8_t threshold_index)</td></tr>
<tr class="memdesc:a05448e0cd2c7bd018c6ca10d29aa5673"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the detection threshold.  <a href="ch__rangefinder_8c.html#a05448e0cd2c7bd018c6ca10d29aa5673">More...</a><br /></td></tr>
<tr class="separator:a05448e0cd2c7bd018c6ca10d29aa5673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ea0971363f3a1c9fdc7e8f040489edd"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a9ea0971363f3a1c9fdc7e8f040489edd">ch_get_thresholds</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, <a class="el" href="structch__thresholds__t.html">ch_thresholds_t</a> *thresh_ptr)</td></tr>
<tr class="memdesc:a9ea0971363f3a1c9fdc7e8f040489edd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get detection thresholds.  <a href="ch__rangefinder_8c.html#a9ea0971363f3a1c9fdc7e8f040489edd">More...</a><br /></td></tr>
<tr class="separator:a9ea0971363f3a1c9fdc7e8f040489edd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86e1f2558e33beb47fec253dd6813eed"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a86e1f2558e33beb47fec253dd6813eed">ch_get_tof_us</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr)</td></tr>
<tr class="memdesc:a86e1f2558e33beb47fec253dd6813eed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the measured time-of-flight from a sensor in microseconds.  <a href="ch__rangefinder_8c.html#a86e1f2558e33beb47fec253dd6813eed">More...</a><br /></td></tr>
<tr class="separator:a86e1f2558e33beb47fec253dd6813eed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55601853843f7961a7ed107cf4c67d53"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a55601853843f7961a7ed107cf4c67d53">ch_is_target_in_ringdown</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr)</td></tr>
<tr class="memdesc:a55601853843f7961a7ed107cf4c67d53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return if a target is detected near sensor (in the ringdown)  <a href="ch__rangefinder_8c.html#a55601853843f7961a7ed107cf4c67d53">More...</a><br /></td></tr>
<tr class="separator:a55601853843f7961a7ed107cf4c67d53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e0e2572cd7db048bca4879d8fcc130c"><td class="memItemLeft" align="right" valign="top"><a id="a1e0e2572cd7db048bca4879d8fcc130c"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>ch_rangefinder_display_config_info</b> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr)</td></tr>
<tr class="separator:a1e0e2572cd7db048bca4879d8fcc130c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac03b9a50e0d29e0b17d236c03eca9098"><td class="memItemLeft" align="right" valign="top"><a id="ac03b9a50e0d29e0b17d236c03eca9098"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>ch_rangefinder_get_algo_config</b> (const <a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, <a class="el" href="structch__rangefinder__algo__config__t.html">ch_rangefinder_algo_config_t</a> *config_ptr)</td></tr>
<tr class="separator:ac03b9a50e0d29e0b17d236c03eca9098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a843a97b6122edc01767bd15385d4cf90"><td class="memItemLeft" align="right" valign="top"><a id="a843a97b6122edc01767bd15385d4cf90"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>ch_rangefinder_get_amplitude</b> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr)</td></tr>
<tr class="separator:a843a97b6122edc01767bd15385d4cf90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe8190297b3c9d8d1a2507ba91b1081d"><td class="memItemLeft" align="right" valign="top"><a id="abe8190297b3c9d8d1a2507ba91b1081d"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>ch_rangefinder_get_range</b> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, <a class="el" href="soniclib_8h.html#a1b137d77afad79d536e322eacdfebd0c">ch_range_t</a> range_type)</td></tr>
<tr class="separator:abe8190297b3c9d8d1a2507ba91b1081d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae7d646ac4759acdbd3c6f7bdf250456"><td class="memItemLeft" align="right" valign="top"><a id="aae7d646ac4759acdbd3c6f7bdf250456"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>ch_rangefinder_get_rx_holdoff</b> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr)</td></tr>
<tr class="separator:aae7d646ac4759acdbd3c6f7bdf250456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb2152af7fd3f97d8402789042d33e96"><td class="memItemLeft" align="right" valign="top"><a id="aeb2152af7fd3f97d8402789042d33e96"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>ch_rangefinder_get_target_range</b> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, uint8_t target_num, <a class="el" href="soniclib_8h.html#a1b137d77afad79d536e322eacdfebd0c">ch_range_t</a> range_type)</td></tr>
<tr class="separator:aeb2152af7fd3f97d8402789042d33e96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a439afafe5b9c03d8ebcc721c929588c8"><td class="memItemLeft" align="right" valign="top"><a id="a439afafe5b9c03d8ebcc721c929588c8"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>ch_rangefinder_get_thresholds</b> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, <a class="el" href="structch__thresholds__t.html">ch_thresholds_t</a> *lib_thresh_buf_ptr)</td></tr>
<tr class="separator:a439afafe5b9c03d8ebcc721c929588c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a750ba44dab38cab6b8ed81b4e50604af"><td class="memItemLeft" align="right" valign="top"><a id="a750ba44dab38cab6b8ed81b4e50604af"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>ch_rangefinder_set_algo_config</b> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, const <a class="el" href="structch__rangefinder__algo__config__t.html">ch_rangefinder_algo_config_t</a> *config_ptr)</td></tr>
<tr class="separator:a750ba44dab38cab6b8ed81b4e50604af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9679694aaeb1d632ab21a2a004fab26c"><td class="memItemLeft" align="right" valign="top"><a id="a9679694aaeb1d632ab21a2a004fab26c"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>ch_rangefinder_set_rx_holdoff</b> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, uint16_t num_samples)</td></tr>
<tr class="separator:a9679694aaeb1d632ab21a2a004fab26c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96e7c4d7f78f9e56ade73ac5f41c0d52"><td class="memItemLeft" align="right" valign="top"><a id="a96e7c4d7f78f9e56ade73ac5f41c0d52"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>ch_rangefinder_set_static_range</b> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, uint16_t num_samples)</td></tr>
<tr class="separator:a96e7c4d7f78f9e56ade73ac5f41c0d52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0d405d4284111a3dbc3d336f8c8bbfa"><td class="memItemLeft" align="right" valign="top"><a id="ad0d405d4284111a3dbc3d336f8c8bbfa"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>ch_rangefinder_set_thresholds</b> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, <a class="el" href="structch__thresholds__t.html">ch_thresholds_t</a> *lib_thresh_buf_ptr)</td></tr>
<tr class="separator:ad0d405d4284111a3dbc3d336f8c8bbfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d2f18445966ba0094e54bfdae39bc0a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a4d2f18445966ba0094e54bfdae39bc0a">ch_set_rx_holdoff</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, uint16_t num_samples)</td></tr>
<tr class="memdesc:a4d2f18445966ba0094e54bfdae39bc0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the receive holdoff sample count.  <a href="ch__rangefinder_8c.html#a4d2f18445966ba0094e54bfdae39bc0a">More...</a><br /></td></tr>
<tr class="separator:a4d2f18445966ba0094e54bfdae39bc0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7b5aecb6cfe54c6d2df428e26192d9a"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#ab7b5aecb6cfe54c6d2df428e26192d9a">ch_set_static_range</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, uint16_t num_samples)</td></tr>
<tr class="memdesc:ab7b5aecb6cfe54c6d2df428e26192d9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure static target rejection.  <a href="ch__rangefinder_8c.html#ab7b5aecb6cfe54c6d2df428e26192d9a">More...</a><br /></td></tr>
<tr class="separator:ab7b5aecb6cfe54c6d2df428e26192d9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a221935be365b6c9fa5b2711c7df57750"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a221935be365b6c9fa5b2711c7df57750">ch_set_threshold</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, uint8_t threshold_index, uint16_t amplitude)</td></tr>
<tr class="memdesc:a221935be365b6c9fa5b2711c7df57750"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the detection threshold.  <a href="ch__rangefinder_8c.html#a221935be365b6c9fa5b2711c7df57750">More...</a><br /></td></tr>
<tr class="separator:a221935be365b6c9fa5b2711c7df57750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e948bfbdc2cbca2f04bc97459541e5f"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ch__rangefinder_8c.html#a7e948bfbdc2cbca2f04bc97459541e5f">ch_set_thresholds</a> (<a class="el" href="structch__dev__t.html">ch_dev_t</a> *dev_ptr, <a class="el" href="structch__thresholds__t.html">ch_thresholds_t</a> *thresh_ptr)</td></tr>
<tr class="memdesc:a7e948bfbdc2cbca2f04bc97459541e5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set detection thresholds.  <a href="ch__rangefinder_8c.html#a7e948bfbdc2cbca2f04bc97459541e5f">More...</a><br /></td></tr>
<tr class="separator:a7e948bfbdc2cbca2f04bc97459541e5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af2b4099e010fd6e0bc112c2790fbbe90"><td class="memItemLeft" align="right" valign="top">const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>THRESH_LEN_REGS</b> [CHX01_COMMON_NUM_THRESHOLDS]</td></tr>
<tr class="separator:af2b4099e010fd6e0bc112c2790fbbe90"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Chirp SonicLib API range finding function implementations. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a0fef1804e3c80f73d9b4f9bf7b9ad685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fef1804e3c80f73d9b4f9bf7b9ad685">&#9670;&nbsp;</a></span>ch_get_num_targets()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ch_get_num_targets </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of targets detected in last measurement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of targets detected in last measurement</dd></dl>
<p>This function returns the number of valid targets that were detected in the last measurement completed by the sensor. Data for each of these targets may then be read using <em><a class="el" href="ch__rangefinder_8h.html#a24683d6023095d66f876895e2cd01cd2" title="Get the range to a specific target detected in last measurement.">ch_get_target_range()</a></em> and <em><a class="el" href="ch__rangefinder_8h.html#a2ecb1677cd9f1a8d767c2715a133670e" title="Get the amplitude for a specific target detected in last measurement.">ch_get_target_amplitude()</a></em>.</p>
<p>See also <em><a class="el" href="ch__rangefinder_8h.html#a24683d6023095d66f876895e2cd01cd2" title="Get the range to a specific target detected in last measurement.">ch_get_target_range()</a></em>, <em>ch_set_num_ranges()</em>. </p>

</div>
</div>
<a id="af1845a2ae19a7be6b18f144eda2f5066"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1845a2ae19a7be6b18f144eda2f5066">&#9670;&nbsp;</a></span>ch_get_num_thresholds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ch_get_num_thresholds </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get number of detection thresholds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of detection thresholds, or 0 if thresholds are not supported</dd></dl>
<p>This function returns the number of independent detection threshold values that are supported by the current sensor and sensor firmware. For firmware supporting multiple thresholds, the number of thresholds is the same as the number of threshold fields in the <em><a class="el" href="structch__thresholds__t.html" title="Multiple detection threshold structure.">ch_thresholds_t</a></em> structure.</p>
<p>See also <em><a class="el" href="ch__rangefinder_8h.html#a7e948bfbdc2cbca2f04bc97459541e5f" title="Set detection thresholds.">ch_set_thresholds()</a></em>. </p>

</div>
</div>
<a id="ab71d5ac02276e0d9b77549eb29195d6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab71d5ac02276e0d9b77549eb29195d6c">&#9670;&nbsp;</a></span>ch_get_rx_holdoff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ch_get_rx_holdoff </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the receive holdoff sample count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of samples that are ignored at the beginning of each measurement</dd></dl>
<p>This function gets the receive (rx) holdoff sample count. The rx holdoff count is the number of samples at the beginning of a measurement that will be ignored for the purpose of detecting a target, as previously set by <em><a class="el" href="soniclib_8h.html#a4d2f18445966ba0094e54bfdae39bc0a" title="Set the receive holdoff sample count.">ch_set_rx_holdoff()</a></em>.</p>
<p>To convert the returned sample count to a physical distance, use <em><a class="el" href="soniclib_8h.html#a290f3e5de2ee174e37ff4522df51d376" title="Convert sample count to millimeters for a sensor.">ch_samples_to_mm()</a></em>.</p>
<p>For ICU sensors, this function always returns the value for the default measurement definition. To specify which measurement to query, use the <em><a class="el" href="icu__gpt_8c.html#a66636ca1bdc87ccfd658df71c93f9b90" title="Get the receive holdoff sample count for a specific measurement.">icu_gpt_get_rx_holdoff()</a></em> function.</p>
<p>See also <em><a class="el" href="soniclib_8h.html#a4d2f18445966ba0094e54bfdae39bc0a" title="Set the receive holdoff sample count.">ch_set_rx_holdoff()</a></em>. </p>

</div>
</div>
<a id="a48883557bd21adef2ea2621e4de824af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48883557bd21adef2ea2621e4de824af">&#9670;&nbsp;</a></span>ch_get_static_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ch_get_static_range </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get static target rejection range setting. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Static target rejection range setting, in samples, or 0 if not enabled</dd></dl>
<p>This function returns the number of samples at the beginning of a measurement cycle over which static target rejection filtering will be applied.</p>
<p>To calculate the physical distance that corresponds to the number of samples, use the <em><a class="el" href="ch__api_8c.html#a290f3e5de2ee174e37ff4522df51d376" title="Convert sample count to millimeters for a sensor.">ch_samples_to_mm()</a></em> function.</p>
<p>For ICU sensors, this function always returns the value for the default measurement definition. To specify which measurement to query, use the <em><a class="el" href="icu__gpt_8c.html#a45810b7cdb9d6a7121636bc5f433f59d" title="Get the number of static target filter samples for a measurement.">icu_gpt_get_static_filter()</a></em> function.</p>
<p>See also <em><a class="el" href="ch__rangefinder_8h.html#ab7b5aecb6cfe54c6d2df428e26192d9a" title="Configure static target rejection.">ch_set_static_range()</a></em>. </p>

</div>
</div>
<a id="a2ecb1677cd9f1a8d767c2715a133670e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ecb1677cd9f1a8d767c2715a133670e">&#9670;&nbsp;</a></span>ch_get_target_amplitude()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ch_get_target_amplitude </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>target_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the amplitude for a specific target detected in last measurement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure </td></tr>
    <tr><td class="paramname">target_num</td><td>number of target to report</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>amplitude value (LSBs)</dd></dl>
<p>This function reads the measurement data for a specific target and returns the measured amplitude value. The amplitude is representative of the incoming sound pressure. The value is expressed in internal sensor counts (LSBs) and is not calibrated to any standard units.</p>
<p>The amplitude value is not updated if a measurement cycle resulted in <em>CH_NO_TARGET</em>, as returned by <em><a class="el" href="ch__rangefinder_8h.html#a24683d6023095d66f876895e2cd01cd2" title="Get the range to a specific target detected in last measurement.">ch_get_target_range()</a></em>.</p>
<p>See also <em><a class="el" href="ch__rangefinder_8h.html#a24683d6023095d66f876895e2cd01cd2" title="Get the range to a specific target detected in last measurement.">ch_get_target_range()</a></em>, <em><a class="el" href="ch__api_8c.html#aa2ef517f154bb269d31fdf3f4e0cc7a2" title="Get the measured amplitude from a sensor.">ch_get_amplitude()</a></em>. </p>

</div>
</div>
<a id="a24683d6023095d66f876895e2cd01cd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24683d6023095d66f876895e2cd01cd2">&#9670;&nbsp;</a></span>ch_get_target_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ch_get_target_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>target_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="soniclib_8h.html#a1b137d77afad79d536e322eacdfebd0c">ch_range_t</a>&#160;</td>
          <td class="paramname"><em>range_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the range to a specific target detected in last measurement. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure </td></tr>
    <tr><td class="paramname">target_num</td><td>number of target to report </td></tr>
    <tr><td class="paramname">range_type</td><td>the range type to be reported (e.g. one-way vs. round-trip)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Range in millimeters times 32, or <em>CH_NO_TARGET</em> (0xFFFFFFFF) if no target was detected, or 0 if error</dd></dl>
<p>This function reads the measurement data for a specific target and then computes the actual range. It should be called after the sensor has indicated that a measurement cycle is complete by generating a signal on the INT line. (Typically, this will be set up by an interrupt handler associated with that input line.)</p>
<p><em>target_num</em> specifies the target whose range is to be calculated. The <em><a class="el" href="ch__rangefinder_8h.html#a0fef1804e3c80f73d9b4f9bf7b9ad685" title="Get the number of targets detected in last measurement.">ch_get_num_targets()</a></em> function may be used to determine the total number of valid targets detected by the measurement.</p>
<p>The <em>range_type</em> parameter indicates whether the measurement is based on the one-way or round-trip distance to/from a target, or the direct distance between two sensors operating in pitch-catch mode. The possible values are:</p><ul>
<li><em>CH_RANGE_ECHO_ONE_WAY</em> - gets full pulse/echo round-trip distance, then divides by 2</li>
<li><em>CH_RANGE_ECHO_ROUND_TRIP</em> - full pulse/echo round-trip distance</li>
<li><em>CH_RANGE_DIRECT</em> - for receiving sensor in pitch-catch mode (one-way)</li>
</ul>
<p>See also <em><a class="el" href="ch__rangefinder_8h.html#a2ecb1677cd9f1a8d767c2715a133670e" title="Get the amplitude for a specific target detected in last measurement.">ch_get_target_amplitude()</a></em>, <em><a class="el" href="ch__api_8c.html#a5cbb4847d39cc9418373b6d1ac8dadc6" title="Get the measured range from a sensor.">ch_get_range()</a></em>, <a class="el" href="ch__rangefinder_8h.html#a0fef1804e3c80f73d9b4f9bf7b9ad685" title="Get the number of targets detected in last measurement.">ch_get_num_targets()</a>. </p>

</div>
</div>
<a id="a8b1f2f18f9ff1bd6e61902790e541d86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b1f2f18f9ff1bd6e61902790e541d86">&#9670;&nbsp;</a></span>ch_get_target_tof_us()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ch_get_target_tof_us </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>target_num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the measured time-of-flight for a specific target in microseconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure </td></tr>
    <tr><td class="paramname">target_num</td><td>number of the detected target to be reported</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Time-of-flight in microseconds, or 0 if error</dd></dl>
<p>This function reads the measurement result registers from the sensor and then computes the time-of-flight in microseconds. The time-of-flight is returned as a 32-bit integer.</p>
<p>If the sensor did not successfully find the range of a target during the most recent measurement, the returned value will be <em>zero</em> (0). If an error occurs when getting or calculating the range, zero (0) will be returned.</p>
<dl class="section note"><dt>Note</dt><dd>This function only reports the results from the most recently completed measurement cycle. It does not actually trigger a measurement. The time-of-flight that is reported is the total time measured by the sensor between transmission and reception. The value is always the full round-trip time-of-flight. </dd></dl>

</div>
</div>
<a id="a05448e0cd2c7bd018c6ca10d29aa5673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05448e0cd2c7bd018c6ca10d29aa5673">&#9670;&nbsp;</a></span>ch_get_threshold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ch_get_threshold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>threshold_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the detection threshold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure </td></tr>
    <tr><td class="paramname">threshold_index</td><td>index to the thresholds, starting from 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>amplitude threshold value</dd></dl>
<p>This function obtains the detection threshold value with the specified <em>threshold_index</em> from the sensor and returns the corresponding threshold amplitude.</p>
<p>See also <em><a class="el" href="ch__rangefinder_8h.html#a221935be365b6c9fa5b2711c7df57750" title="Set the detection threshold.">ch_set_threshold()</a></em>.</p>
<dl class="section note"><dt>Note</dt><dd>This function is only available when using special sensor firmware packages from Chirp.</dd>
<dd>
For ICU sensors and CH201 sensors with GPRMT firmware, multiple thresholds with programmable sample ranges are supported - use <em><a class="el" href="ch__rangefinder_8h.html#a9ea0971363f3a1c9fdc7e8f040489edd" title="Get detection thresholds.">ch_get_thresholds()</a></em>. </dd></dl>

</div>
</div>
<a id="a9ea0971363f3a1c9fdc7e8f040489edd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ea0971363f3a1c9fdc7e8f040489edd">&#9670;&nbsp;</a></span>ch_get_thresholds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ch_get_thresholds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structch__thresholds__t.html">ch_thresholds_t</a> *&#160;</td>
          <td class="paramname"><em>thresh_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get detection thresholds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure </td></tr>
    <tr><td class="paramname">thresh_ptr</td><td>pointer to <a class="el" href="structch__thresholds__t.html" title="Multiple detection threshold structure.">ch_thresholds_t</a> structure to receive threshold data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success, 1 if error</dd></dl>
<p>This function obtains the current detection threshold values from the sensor and returns them in a <a class="el" href="structch__thresholds__t.html" title="Multiple detection threshold structure.">ch_thresholds_t</a> structure specified by <em>thresh_ptr</em>. The <a class="el" href="structch__thresholds__t.html" title="Multiple detection threshold structure.">ch_thresholds_t</a> structure holds an array of <a class="el" href="structch__thresh__t.html" title="Detection threshold value.">ch_thresh_t</a> structures, each of which contains a starting sample number and amplitude threshold value.</p>
<p>For ICU sensors, this function only reports the thresholds for the default measurement (CH_DEFAULT_MEAS_NUM). If both measurements are being used, the thresholds for each may be obtained individually by using the <em><a class="el" href="icu__gpt_8c.html#a72d278d9207e1b80a57ff13fff1a7f56" title="Get detection thresholds for a specific measurement.">icu_gpt_get_thresholds()</a></em> function.</p>
<p>See also <em><a class="el" href="ch__rangefinder_8h.html#a7e948bfbdc2cbca2f04bc97459541e5f" title="Set detection thresholds.">ch_set_thresholds()</a></em>.</p>
<dl class="section note"><dt>Note</dt><dd>This function is available for ICU sensors and when using most sensor firmware for CH201 sensors. If using other CH101/CH201 firmware with only a single detection treshold, use <em><a class="el" href="ch__rangefinder_8h.html#a05448e0cd2c7bd018c6ca10d29aa5673" title="Get the detection threshold.">ch_get_threshold()</a></em>. </dd></dl>

</div>
</div>
<a id="a86e1f2558e33beb47fec253dd6813eed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86e1f2558e33beb47fec253dd6813eed">&#9670;&nbsp;</a></span>ch_get_tof_us()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ch_get_tof_us </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the measured time-of-flight from a sensor in microseconds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Time-of-flight in microseconds, or 0 if error</dd></dl>
<p>This function reads the measurement result registers from the sensor and then computes the time-of-flight in microseconds. The time-of-flight is returned as a 32-bit integer.</p>
<p>If the sensor did not successfully find the range of a target during the most recent measurement, the returned value will be <em>zero</em> (0). If an error occurs when getting or calculating the range, zero (0) will be returned.</p>
<dl class="section note"><dt>Note</dt><dd>This function only reports the results from the most recently completed measurement cycle. It does not actually trigger a measurement. The time-of-flight that is reported is the total time measured by the sensor between transmission and reception. The value is always the full round-trip time-of-flight. </dd></dl>

</div>
</div>
<a id="a55601853843f7961a7ed107cf4c67d53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55601853843f7961a7ed107cf4c67d53">&#9670;&nbsp;</a></span>ch_is_target_in_ringdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ch_is_target_in_ringdown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return if a target is detected near sensor (in the ringdown) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 if a target is detected, else 0 </dd></dl>

</div>
</div>
<a id="a4d2f18445966ba0094e54bfdae39bc0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d2f18445966ba0094e54bfdae39bc0a">&#9670;&nbsp;</a></span>ch_set_rx_holdoff()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ch_set_rx_holdoff </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>num_samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the receive holdoff sample count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure </td></tr>
    <tr><td class="paramname">num_samples</td><td>number of samples to be ignored at the beginning of each measurement</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success, 1 if error</dd></dl>
<p>This function sets the receive (rx) holdoff sample count. <em>num_samples</em> specifies a number of samples at the beginning of a measurement that will be ignored for the purpose of detecting a target. (These samples correspond to the closest distances from the sensor.)</p>
<p>To convert a physical distance into a sample count value to use here, use <em><a class="el" href="soniclib_8h.html#aa256c720961a6d327c515da60d8071c2" title="Convert millimeters to sample count for a sensor.">ch_mm_to_samples()</a></em>.</p>
<p>For ICU sensors, this function always controls the default measurement definition. To specify which measurement to modify, use the <em><a class="el" href="icu__gpt_8c.html#a2059cc8c8370a1f76cb145af09833756" title="Set the receive holdoff sample count for a specific measurement.">icu_gpt_set_rx_holdoff()</a></em> function.</p>
<p>See also <em><a class="el" href="soniclib_8h.html#ab71d5ac02276e0d9b77549eb29195d6c" title="Get the receive holdoff sample count.">ch_get_rx_holdoff()</a></em>. </p>

</div>
</div>
<a id="ab7b5aecb6cfe54c6d2df428e26192d9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7b5aecb6cfe54c6d2df428e26192d9a">&#9670;&nbsp;</a></span>ch_set_static_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ch_set_static_range </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>num_samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure static target rejection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure </td></tr>
    <tr><td class="paramname">num_samples</td><td>number of sensor samples (at beginning of measurement cycle) over which static targets will be rejected</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, non-zero if error</dd></dl>
<p>Static target rejection is a special processing mode in which the sensor will actively filter out signals from close, non-moving objects, so that they do not continue to generate range readings. This allows detection and reporting of target objects that are farther away than the static objects. (Normally, the sensor reports the range value for the closest detected object.)</p>
<p>Static target rejection is applied for a specified number of samples, starting at the beginning of a measurement cycle* (i.e. for the closest objects). The num_samples parameter specifies the number of samples that will be filtered. To calculate the appropriate value for <em>num_samples</em> to filter over a certain physical distance, use the <em><a class="el" href="ch__api_8c.html#aa256c720961a6d327c515da60d8071c2" title="Convert millimeters to sample count for a sensor.">ch_mm_to_samples()</a></em> function.</p>
<p>For ICU sensors, this function always controls the default measurement definition. To specify which measurement to modify, use the <em><a class="el" href="icu__gpt_8c.html#aef0498122bbccfabc717964c02804638" title="Set the number of static target filter samples for a measurement.">icu_gpt_set_static_filter()</a></em> function.</p>
<p>See also <em><a class="el" href="ch__rangefinder_8h.html#a48883557bd21adef2ea2621e4de824af" title="Get static target rejection range setting.">ch_get_static_range()</a></em>. </p>

</div>
</div>
<a id="a221935be365b6c9fa5b2711c7df57750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a221935be365b6c9fa5b2711c7df57750">&#9670;&nbsp;</a></span>ch_set_threshold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ch_set_threshold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>threshold_index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>amplitude</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the detection threshold. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure </td></tr>
    <tr><td class="paramname">threshold_index</td><td>index to the thresholds, starting from 0 </td></tr>
    <tr><td class="paramname">amplitude</td><td>amplitude threshold value</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success, 1 if error</dd></dl>
<p>This function sets the detection threshold value with the specified <em>threshold_index</em> value for the sensor. The detection threshold is the minimum amplitude required for a target detection to be reported. The <em>amplitude</em> value is the new required amplitude, expressed in the same internal units used in <em><a class="el" href="ch__api_8c.html#aa2ef517f154bb269d31fdf3f4e0cc7a2" title="Get the measured amplitude from a sensor.">ch_get_amplitude()</a></em> and other functions.</p>
<p>See also <em><a class="el" href="ch__rangefinder_8h.html#a05448e0cd2c7bd018c6ca10d29aa5673" title="Get the detection threshold.">ch_get_threshold()</a></em>.</p>
<dl class="section note"><dt>Note</dt><dd>This function is only available when using select sensor firmware packages from Chirp.</dd>
<dd>
For ICU sensors and CH201 sensors with GPRMT firmware, multiple thresholds with programmable sample ranges are supported - use <em><a class="el" href="ch__rangefinder_8h.html#a7e948bfbdc2cbca2f04bc97459541e5f" title="Set detection thresholds.">ch_set_thresholds()</a></em>. </dd></dl>

</div>
</div>
<a id="a7e948bfbdc2cbca2f04bc97459541e5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e948bfbdc2cbca2f04bc97459541e5f">&#9670;&nbsp;</a></span>ch_set_thresholds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ch_set_thresholds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structch__dev__t.html">ch_dev_t</a> *&#160;</td>
          <td class="paramname"><em>dev_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structch__thresholds__t.html">ch_thresholds_t</a> *&#160;</td>
          <td class="paramname"><em>thresh_ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set detection thresholds. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_ptr</td><td>pointer to the <a class="el" href="structch__dev__t.html" title="Chirp sensor device descriptor structure.">ch_dev_t</a> descriptor structure </td></tr>
    <tr><td class="paramname">thresh_ptr</td><td>pointer to <a class="el" href="structch__thresholds__t.html" title="Multiple detection threshold structure.">ch_thresholds_t</a> structure containing threshold data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success, 1 if error</dd></dl>
<p>This function sets the detection threshold values for the sensor based on the values in the <em><a class="el" href="structch__thresholds__t.html" title="Multiple detection threshold structure.">ch_thresholds_t</a></em> structure specified by <em>thresh_ptr</em>. The <a class="el" href="structch__thresholds__t.html" title="Multiple detection threshold structure.">ch_thresholds_t</a> structure holds an array of <a class="el" href="structch__thresh__t.html" title="Detection threshold value.">ch_thresh_t</a> structures, each of which contains a starting sample number and amplitude threshold value.</p>
<p>To use this function, first initialize the <a class="el" href="structch__thresh__t.html" title="Detection threshold value.">ch_thresh_t</a> sample/level pair of values for each threshold. The ICU sensor supports eight (8) separate thresholds, while the CH201 sensor with GPRMT firmware supports six (6) thresholds. Each threshold has a maximum sample length of 255.</p>
<p>It is not necessary to use the full set of thresholds, if the application and sensing environment do not require that many different levels. Unused thresholds should occupy the last elements in the <a class="el" href="structch__thresholds__t.html" title="Multiple detection threshold structure.">ch_thresholds_t</a> structure and should have zero (0) for their starting sample number. These entries will be ignored, and the threshold specified in the final valid entry will apply to the rest of the measurement.</p>
<p>For ICU sensors, this function only sets the thresholds for the default measurement (CH_DEFAULT_MEAS_NUM). If both measurements are being used, the thresholds for each may be set individually by using the <em><a class="el" href="icu__gpt_8c.html#a2b02c8f63577681d05651be8f3d231a2" title="Set detection thresholds for a specific measurement.">icu_gpt_set_thresholds()</a></em> function.</p>
<p>See also <em><a class="el" href="ch__rangefinder_8h.html#a9ea0971363f3a1c9fdc7e8f040489edd" title="Get detection thresholds.">ch_get_thresholds()</a></em>.</p>
<dl class="section note"><dt>Note</dt><dd>This function supports ICU sensors and CH201 sensors with GPRMT firmware, with multiple detection thresholds and programmable sample ranges. If using other firmware with a single detection treshold, use <em><a class="el" href="ch__rangefinder_8h.html#a221935be365b6c9fa5b2711c7df57750" title="Set the detection threshold.">ch_set_threshold()</a></em>. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af2b4099e010fd6e0bc112c2790fbbe90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2b4099e010fd6e0bc112c2790fbbe90">&#9670;&nbsp;</a></span>THRESH_LEN_REGS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t THRESH_LEN_REGS[CHX01_COMMON_NUM_THRESHOLDS]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">        CHX01_GPRMT_REG_THRESH_LEN_0,</div>
<div class="line">        CHX01_GPRMT_REG_THRESH_LEN_1,</div>
<div class="line">        CHX01_GPRMT_REG_THRESH_LEN_2,</div>
<div class="line">        CHX01_GPRMT_REG_THRESH_LEN_3,</div>
<div class="line">        CHX01_GPRMT_REG_THRESH_LEN_4,</div>
<div class="line">        0  </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
