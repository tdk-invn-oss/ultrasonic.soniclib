<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Chirp SonicLib: SonicLib</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Chirp SonicLib
   &#160;<span id="projectnumber">3.23.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">SonicLib </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> </p><h1>Summary</h1>
<h2>The main API documentation is available <a href="https://tdk-invn-oss.github.io/ultrasonic.soniclib">here</a></h2>
<p>SonicLib is a set of API functions and sensor driver routines designed so an embedded C application can easily control TDK/Invensense ultrasonic sensors (originally developed by Chirp Microsystems). SonicLib allows an application developer to manage and obtain ultrasonic data from one or more devices, without needing to develop special low-level code to interact with the sensors directly.</p>
<p>The SonicLib API functions provide a consistent interface for an application to use different sensors in various situations. This is especially important, because all TDK ultrasonic sensors are completely software-defined, including the register map. The SonicLib interfaces allow an application to use different sensor firmware images, without requiring code changes.</p>
<dl class="section note"><dt>Note</dt><dd>All operation of the sensor is controlled through the set of functions, data structures, and symbolic values defined in the <a class="el" href="soniclib_8h.html" title="SonicLib public API and support functions for TDK/InvenSense ultrasonic sensors (originally developed...">soniclib.h</a> header file. You should not need to modify this file or the SonicLib functions, or use lower-level internal functions such as described in the <a class="el" href="ch__driver_8h.html" title="Internal driver functions for operation with the Chirp ultrasonic sensor.">ch_driver.h</a> file. Using any of these non-public methods will reduce your ability to benefit from future enhancements and releases from Chirp.</dd></dl>
<h1>SonicLib API</h1>
<h2>The main documentation for the SonicLib API is in the <a class="el" href="soniclib_8h.html" title="SonicLib public API and support functions for TDK/InvenSense ultrasonic sensors (originally developed...">soniclib.h</a> header file.</h2>
<p>That file contains definitions of all public interfaces that applications can use to interact with the sensor.</p>
<p>There are over 100 different functions available in the SonicLib API, although a typical application will only use a small subset of them. There are many <em>ch_set_XXX()</em> and <em>ch_get_XXX()</em> functions that set and return specific values for the device, so it should never be necessary to directly access fields in the device descriptor or other internal structures.</p>
<h1>Required Board Support Package (BSP)</h1>
<h2>The main documentation for the BSP interface is in the <a class="el" href="chirp__bsp_8h.html" title="User-supplied board support package functions to interface Chirp SonicLib to a specific hardware plat...">chirp_bsp.h</a> header file.</h2>
<p>SonicLib also defines interfaces for a set of board support package (BSP) functions that are specific to the hardware platform being used. These are functions that are not part of SonicLib, but that SonicLib will call when necessary to interact with the peripheral devices and other resources on the board. These include GPIO pins, timers, enabling/disabling interrupts, etc.</p>
<p>The <a class="el" href="chirp__bsp_8h.html" title="User-supplied board support package functions to interface Chirp SonicLib to a specific hardware plat...">chirp_bsp.h</a> file contains information on implementing these functions as well as the interface definitions and which functions are required, recommended, or optional for your situation.</p>
<p>The BSP implementation in a final product is ultimately the responsibility of the development team. However, example BSP's are available for certain evaluation boards for use during development and as a template for custom designs. Typically, BSPs that use the same MCU family will share common calls to the MCU vendor's I/O library, varying mostly in pin assignments, etc.</p>
<p>Contact TDK/InvenSense for information on BSP availability.</p>
<h1>Chirp Driver (internal)</h1>
<p>SonicLib includes internal driver functions to interact directly with the sensor. These modules are distributed as source code to simplify integration with your embedded application and are supplied for reference only. These functions are described in the <a class="el" href="ch__driver_8h.html" title="Internal driver functions for operation with the Chirp ultrasonic sensor.">ch_driver.h</a> header file. You should not modify these functions or call them directly from your application.</p>
<p>Similarly, the <code>details</code> subdirectory within the SonicLib distribution contains header files and other internal definitions that are needed to build SonicLib with your application. However, these files and their contents are subject to change without notice and should not be referenced directly.</p>
<h1>CMake Support</h1>
<p>A <code>CMakeLists.txt</code> is provided for easy integration of SonicLib into a CMake-based project. Generally, all that is required is to use the <code>add_subdirectory</code> command to add the directory containing this <code>CMakeLists.txt</code> to your project. You then get a target called <code>soniclib</code> that you can use with the target-based CMake commands (<code>target_link_libraries</code>, <code>target_include_directories</code>).</p>
<p>Additionally, there are several CMake variables that control various build options. These are as follows. See the <code><a class="el" href="chirp__board__config_8h_source.html">invn/soniclib/details/chirp_board_config.h</a></code> header for details.</p>
<ul>
<li><code>CHIRP_INIT_FW_TYPE</code>: One of <code>FULL</code>, <code>NO_TX_OPTIMIZATION</code>, or <code>NONE</code>.</li>
<li><code>CHIRP_MAX_NUM_SENSORS</code>: Maximum number of sensors supported.</li>
<li><code>CHIRP_NUM_BUSES</code>: Number of SPI/I2C buses supported.</li>
<li><code>CHIRP_SENSOR_INT_PIN</code>: (ICU-x0201 only) Pin to use for interrupts.</li>
<li><code>CHIRP_SENSOR_TRIG_PIN</code>: (ICU-x0201 only) Pin to use for triggers.</li>
<li><code>INCLUDE_SHASTA_SUPPORT</code>: Build for Shasta (ICU) architecture sensors.</li>
</ul>
<p>These variables can be set through the CMake GUI, through command line -D options in the main CMake command, or manually through the <code>CMakeCache.txt</code> file post-configuration.</p>
<p>For example, the following cmake command configures the SonicLib build for shasta support with the <code>NO_TX_OPTIMIZATION</code> init firmware. Below we are using a toolchain file for an STM32 target. You can replace this with the toolchain file needed by your target. Note the <code>`</code> character is for powershell line-continuation.</p>
<div class="fragment"><div class="line">cmake -G &quot;MinGW Makefiles&quot; `</div>
<div class="line">    -DCMAKE_TOOLCHAIN_FILE=&quot;CMakeToolchains/arm-none-eabi-m4.cmake&quot; `</div>
<div class="line">    -DINCLUDE_SHASTA_SUPPORT:BOOL=ON `</div>
<div class="line">    -DCHIRP_INIT_FW_TYPE:STRING=NO_TX_OPTIMIZATION `</div>
<div class="line">    -B build</div>
</div><!-- fragment --><h1>Copyright</h1>
<p>&copy; Copyright 2016-2023, TDK/InvenSense. All rights reserved. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
